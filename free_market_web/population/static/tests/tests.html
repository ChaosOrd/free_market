<html>
<head>
  <meta charset="utf-8">
  <title>Javascript tests</title>
  <link rel="stylesheet" href="../../../free_market_web/static/tests/qunit.css">
</head>
<body>
  <div id="qunit"></div>
  <div id="qunit_fixture">
    <form>
      <input type="textbox" id="id_first_tb" tabindex="2" />
      <input type="textbox" id="id_second_tb" tabindex="3" />
      <input type="button" id="id_btn" tabindex="4" />
      <input type="textbox" id="some_other_input" tabindex="5" />
    </form>
  </div>
  <script src="http://code.jquery.com/jquery.min.js"></script>
  <script src="../../../free_market_web/static/tests/qunit.js"></script>
  <script src="../navigation.js"></script>
  <script>

function press(key)
{
  var e = $.Event('keypress');
  e.which = key;
  $(document.activeElement).trigger(e);
}

test("enter should focus on next input if current input is text box", function() {
  $('#id_first_tb').focus();
  press(13);
  equal(document.activeElement.id, 'id_second_tb');
});

test("key other than enter shoud not focus on next input", function() {
  $('#id_first_tb').focus();
  press(43);
  equal(document.activeElement.id, 'id_first_tb');
});

test("IsTextbox should return true when given textbox element", function() {
  equal(navigation.IsTextBox($('#id_first_tb')), true);
});

test("IsTextbox should return false when given button element", function() {
  equal(navigation.IsTextBox($('#id_btn')), false);
});

test("enter key should not focus if current input is not text box", function()
{
  $('#id_btn').focus();
  press(13);
  equal(document.activeElement.id, 'id_btn');
});
  </script>
</html>
